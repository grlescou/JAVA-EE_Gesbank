<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../templates/default_template.xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:p="http://primefaces.org/ui" >

    <ui:define name="meta-attr">
        <f:attribute name="PageRole" value="Administ" />
    </ui:define>
    
    <ui:define name="complementTitreEtH1">
        Liste des Clients
    </ui:define>
    
      <ui:define name="identifier">
        #{loginMBean.adminClient.prenom} #{loginMBean.adminClient.nom}  
    </ui:define>

    <ui:define name="content-title">
        Liste des Clients
    </ui:define>

    <ui:define name="content">
          
        <h:form>
            <f:view>


                <h:form>
                    
                    <p:dataTable  id="radioDT" value="#{listClientMBean.listeClientBanque}" var="item"  widgetVar="compteTb"
                     paginator="true" rows="10" rowsPerPageTemplate="10,20" sortMode="multiple" emptyMessage="Aucun client Trouve..." 
                     filteredValue="#{listClientMBean.clientBanqueFilter}"
                     selection="#{listClientMBean.selectedClientBanque}" rowKey="#{item.id}">
                        <f:facet name="header">  
                    <p:outputPanel>  
                        <h:outputText value="Rechercher : " />  
                        <p:inputText id="globalFilter" onkeyup="PF('compteTb').filter();" style="width:150px" />  
                    </p:outputPanel>  
                  </f:facet> 
                        <p:column selectionMode="single" style="width:16px;text-align:center"/>
                       
                        
                        
                        
                          <p:column>
                    <f:facet name="header">
                        <h:outputText value="Id"/>
                    </f:facet>
                    <h:outputText value="#{item.id}"/>
                </p:column>
                <p:column>
                        <f:facet name="header">
                        <h:outputText value="NifCin"/>
                    </f:facet>
                    <h:outputText value="#{item.nifCin}"/>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Nom"/>
                    </f:facet>
                    <h:outputText value="#{item.nom}"/>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Prenom"/>
                    </f:facet>
                    <h:outputText value="#{item.prenom}"/>
                </p:column>
              
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="ROLECLIENT"/>
                    </f:facet>
                    <h:outputText value="#{item.discriminatorValue}"/>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Created"/>
                    </f:facet>
                    <h:outputText value="#{item.created}">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:outputText>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Email"/>
                    </f:facet>
                    <h:outputText value="#{item.email}"/>
                </p:column>
               
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="UpdateAt"/>
                    </f:facet>
                    <h:outputText value="#{item.updateAt}">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:outputText>
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Username"/>
                    </f:facet>
                    <h:outputText value="#{item.username}"/>
                </p:column>
                        
                        
                        
                        
                        
                        
                        
                        
                        
               
                         <p:column>
                            <f:facet name="header">
                                <h:outputText value="Action"/>
                            </f:facet>
                            
                             <h:link class="lien" outcome="#{listClientMBean.getActiontStringListComptes(item.id)}" value="Liste Comptes"/>
                             

                        </p:column>
                        <f:facet name="footer">
                           <p:commandButton class="lien" value="supprimer"
                                 oncomplete="PF('DelDialog').show()"
                                 process="radioDT" update=":DelDetail"
                                 title="Supprimer"
                                 image="/resources/img/DeleteRed.png"/> 
                        </f:facet>
                    </p:dataTable>
                </h:form>
            </f:view>

        </h:form>
        
        
        
        <p:dialog header="Delete Client" widgetVar="DelDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
        <p:outputPanel id="DelDetail" style="text-align:center;">
            <p:panelGrid  columns="2" rendered="#{not empty listClientMBean.selectedClientBanque}" columnClasses="label,value">
               <f:facet name="header">
                   <h2>Voulez vous vraiment supprimer ce Client ?</h2> 
                </f:facet>
                
                <h:outputText value="Id:" />
                <h:outputText value="#{listClientMBean.selectedClientBanque.id}" />
 
                <h:outputText value="Nom:" />
                <h:outputText value="#{listClientMBean.selectedClientBanque.nom}" />
 
                <h:outputText value="Prenom:" />
                <h:outputText value="#{listClientMBean.selectedClientBanque.prenom}" />
                
               <p:commandButton class="lien" 
                                type="submit"
                                action="#{adminMBean.supprimerClientBanque(listClientMBean.selectedClientBanque)}"
                                 value="supprimer"
                                 title="Supprimer"
                                 image="/resources/img/DeleteRed.png"
                                 oncomplete="PF('DelDialog').hide(); PF('compteTb').filter();"/>

               
               
            </p:panelGrid>
        </p:outputPanel>
    </p:dialog>
 
 

    </ui:define>
    
</ui:composition>
